{"openapi":"3.1.0","info":{"title":"Dormi API","description":"기숙사 통합 관리 시스템 API","version":"1.0.0"},"servers":[{"url":"http://localhost:8081","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"paths":{"/api/users/{id}":{"get":{"tags":["user-controller"],"operationId":"getUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"put":{"tags":["user-controller"],"operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"delete":{"tags":["user-controller"],"operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"No Content"}}}},"/api/students/{id}":{"get":{"tags":["student-controller"],"operationId":"getStudent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}}}},"put":{"tags":["student-controller"],"operationId":"updateStudent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStudentRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}}}},"delete":{"tags":["student-controller"],"operationId":"deleteStudent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"No Content"}}}},"/api/users":{"get":{"tags":["user-controller"],"operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"post":{"tags":["user-controller"],"operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/students":{"get":{"tags":["student-controller"],"operationId":"getAllStudents","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentResponse"}}}}}}},"post":{"tags":["student-controller"],"operationId":"createStudent","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStudentRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}}}}},"/api/students/import":{"post":{"tags":["student-controller"],"operationId":"importFromCsv","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportStudentRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentResponse"}}}}}}}},"/api/points/{id}/cancel":{"post":{"tags":["point-controller"],"operationId":"cancelPoint","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PointResponse"}}}}}}},"/api/points/student/{studentId}":{"get":{"tags":["point-controller"],"operationId":"getPointsByStudent","parameters":[{"name":"studentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PointResponse"}}}}}}},"post":{"tags":["point-controller"],"operationId":"grantPoint","parameters":[{"name":"studentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrantPointRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PointResponse"}}}}}}},"/api/points/bulk":{"post":{"tags":["point-controller"],"operationId":"bulkGrantPoints","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkGrantPointRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PointResponse"}}}}}}}},"/api/duties":{"get":{"tags":["duty-controller"],"operationId":"getSchedulesByDateRange","parameters":[{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}},"post":{"tags":["duty-controller"],"operationId":"createSchedule","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDutyScheduleRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}},"/api/duties/{id}/swap":{"post":{"tags":["duty-controller"],"operationId":"swapSchedules","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwapDutyRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/duties/generate/night-study":{"post":{"tags":["duty-controller"],"operationId":"generateNightStudyDutySchedules","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateNightStudyDutyRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}}},"/api/duties/generate/dorm":{"post":{"tags":["duty-controller"],"operationId":"generateDormDutySchedules","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateDormDutyRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}}},"/api/duties/bulk":{"post":{"tags":["duty-controller"],"operationId":"createBulkSchedules","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CreateDutyScheduleRequest"}}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/api/students/search":{"get":{"tags":["student-controller"],"operationId":"searchByName","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentResponse"}}}}}}}},"/api/students/room/{roomNumber}":{"get":{"tags":["student-controller"],"operationId":"getStudentsByRoom","parameters":[{"name":"roomNumber","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentResponse"}}}}}}}},"/api/students/number/{studentNumber}":{"get":{"tags":["student-controller"],"operationId":"getStudentByNumber","parameters":[{"name":"studentNumber","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}}}}},"/api/points/{id}":{"get":{"tags":["point-controller"],"operationId":"getPoint","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PointResponse"}}}}}}},"/api/points/student/{studentId}/summary":{"get":{"tags":["point-controller"],"operationId":"getPointSummary","parameters":[{"name":"studentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PointSummaryResponse"}}}}}}},"/api/logs":{"get":{"tags":["audit-log-controller"],"operationId":"getLogs","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageAuditLogResponse"}}}}}}},"/api/logs/user/{userId}":{"get":{"tags":["audit-log-controller"],"operationId":"getLogsByUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogResponse"}}}}}}}},"/api/logs/entity/{entityType}/{entityId}":{"get":{"tags":["audit-log-controller"],"operationId":"getLogsByEntity","parameters":[{"name":"entityType","in":"path","required":true,"schema":{"type":"string","enum":["USER","STUDENT","POINT","DUTY_SCHEDULE"]}},{"name":"entityId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogResponse"}}}}}}}},"/api/logs/date-range":{"get":{"tags":["audit-log-controller"],"operationId":"getLogsByDateRange","parameters":[{"name":"start","in":"query","required":true,"schema":{"type":"string","format":"date-time"}},{"name":"end","in":"query","required":true,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogResponse"}}}}}}}},"/api/logs/action/{action}":{"get":{"tags":["audit-log-controller"],"operationId":"getLogsByAction","parameters":[{"name":"action","in":"path","required":true,"schema":{"type":"string","enum":["CREATE","UPDATE","DELETE","LOGIN","POINT_GRANT","POINT_CANCEL","POINT_RESET","DUTY_SWAP","DUTY_COMPLETE"]}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogResponse"}}}}}}}},"/api/duties/{id}":{"get":{"tags":["duty-controller"],"operationId":"getSchedule","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}},"delete":{"tags":["duty-controller"],"operationId":"deleteSchedule","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"No Content"}}}},"/api/duties/today":{"get":{"tags":["duty-controller"],"operationId":"getTodaySchedules","parameters":[{"name":"type","in":"query","required":true,"schema":{"type":"string","enum":["DORM","NIGHT_STUDY"]}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}}},"/api/duties/assignee/{assigneeId}":{"get":{"tags":["duty-controller"],"operationId":"getSchedulesByAssignee","parameters":[{"name":"assigneeId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DutyScheduleResponse"}}}}}}}},"/api/points/reset":{"delete":{"tags":["point-controller"],"operationId":"resetAllPoints","responses":{"204":{"description":"No Content"}}}}},"components":{"schemas":{"UpdateUserRequest":{"type":"object","properties":{"name":{"type":"string"},"roles":{"type":"array","items":{"type":"string","enum":["ADMIN","SUPERVISOR","COUNCIL"]},"uniqueItems":true}}},"UserResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"name":{"type":"string"},"roles":{"type":"array","items":{"type":"string","enum":["ADMIN","SUPERVISOR","COUNCIL"]},"uniqueItems":true}}},"UpdateStudentRequest":{"type":"object","properties":{"name":{"type":"string"},"roomNumber":{"type":"string"},"grade":{"type":"integer","format":"int32"}}},"StudentResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"studentNumber":{"type":"string"},"name":{"type":"string"},"roomNumber":{"type":"string"},"grade":{"type":"integer","format":"int32"}}},"CreateUserRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","maxLength":2147483647,"minLength":8},"name":{"type":"string","minLength":1},"roles":{"type":"array","items":{"type":"string","enum":["ADMIN","SUPERVISOR","COUNCIL"]},"uniqueItems":true}},"required":["email","name","password"]},"CreateStudentRequest":{"type":"object","properties":{"studentNumber":{"type":"string","minLength":1},"name":{"type":"string","minLength":1},"roomNumber":{"type":"string","minLength":1},"grade":{"type":"integer","format":"int32","maximum":3,"minimum":1}},"required":["name","roomNumber","studentNumber"]},"ImportStudentRequest":{"type":"object","properties":{"csv":{"type":"string"}}},"PointResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"student":{"$ref":"#/components/schemas/StudentResponse"},"type":{"type":"string","enum":["MERIT","DEMERIT"]},"score":{"type":"integer","format":"int32"},"reason":{"type":"string","enum":["LATE_RETURN","ABSENT_ROLLCALL","NOISE","ROOM_UNCLEANED","UNAUTHORIZED_OUTING","UNAUTHORIZED_ABSENCE","SMOKING","DRINKING","GOOD_DEED","CLEAN_ROOM","VOLUNTEER","OTHER"]},"reasonDescription":{"type":"string"},"customReason":{"type":"string"},"grantedBy":{"$ref":"#/components/schemas/UserResponse"},"cancelled":{"type":"boolean"},"cancelledAt":{"type":"string","format":"date-time"},"cancelledBy":{"$ref":"#/components/schemas/UserResponse"},"createdAt":{"type":"string","format":"date-time"}}},"GrantPointRequest":{"type":"object","properties":{"type":{"type":"string","enum":["MERIT","DEMERIT"]},"score":{"type":"integer","format":"int32","minimum":1},"reason":{"type":"string","enum":["LATE_RETURN","ABSENT_ROLLCALL","NOISE","ROOM_UNCLEANED","UNAUTHORIZED_OUTING","UNAUTHORIZED_ABSENCE","SMOKING","DRINKING","GOOD_DEED","CLEAN_ROOM","VOLUNTEER","OTHER"]},"customReason":{"type":"string"}},"required":["reason","type"]},"BulkGrantPointRequest":{"type":"object","properties":{"studentIds":{"type":"array","items":{"type":"integer","format":"int64"},"minItems":1},"point":{"$ref":"#/components/schemas/GrantPointRequest"}},"required":["studentIds"]},"CreateDutyScheduleRequest":{"type":"object","properties":{"type":{"type":"string","enum":["DORM","NIGHT_STUDY"]},"assigneeId":{"type":"integer","format":"int64"},"date":{"type":"string","format":"date"},"floor":{"type":"integer","format":"int32"}},"required":["assigneeId","date","type"]},"DutyScheduleResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"type":{"type":"string","enum":["DORM","NIGHT_STUDY"]},"assignee":{"$ref":"#/components/schemas/UserResponse"},"date":{"type":"string","format":"date"},"floor":{"type":"integer","format":"int32"}}},"SwapDutyRequest":{"type":"object","properties":{"targetScheduleId":{"type":"integer","format":"int64"}},"required":["targetScheduleId"]},"GenerateNightStudyDutyRequest":{"type":"object","properties":{"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"floor2Assignees":{"type":"array","items":{"type":"integer","format":"int64"},"minItems":1},"floor3Assignees":{"type":"array","items":{"type":"integer","format":"int64"},"minItems":1}},"required":["endDate","floor2Assignees","floor3Assignees","startDate"]},"GenerateDormDutyRequest":{"type":"object","properties":{"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"assignees":{"type":"array","items":{"type":"integer","format":"int64"},"minItems":1}},"required":["assignees","endDate","startDate"]},"LoginRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","minLength":1}},"required":["email","password"]},"TokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"tokenType":{"type":"string"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"PointSummaryResponse":{"type":"object","properties":{"studentId":{"type":"integer","format":"int64"},"meritTotal":{"type":"integer","format":"int32"},"demeritTotal":{"type":"integer","format":"int32"},"netScore":{"type":"integer","format":"int32"},"expulsionWarning":{"type":"boolean"}}},"Pageable":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int32","minimum":1},"sort":{"type":"array","items":{"type":"string"}}}},"AuditLogResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"action":{"type":"string","enum":["CREATE","UPDATE","DELETE","LOGIN","POINT_GRANT","POINT_CANCEL","POINT_RESET","DUTY_SWAP","DUTY_COMPLETE"]},"entityType":{"type":"string","enum":["USER","STUDENT","POINT","DUTY_SCHEDULE"]},"entityId":{"type":"integer","format":"int64"},"performedById":{"type":"integer","format":"int64"},"details":{"type":"string"},"timestamp":{"type":"string","format":"date-time"}}},"PageAuditLogResponse":{"type":"object","properties":{"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogResponse"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"paged":{"type":"boolean"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"unpaged":{"type":"boolean"},"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"}}},"SortObject":{"type":"object","properties":{"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"},"empty":{"type":"boolean"}}}},"securitySchemes":{"bearerAuth":{"type":"http","name":"bearerAuth","scheme":"bearer","bearerFormat":"JWT"}}}}